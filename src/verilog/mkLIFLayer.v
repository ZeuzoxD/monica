//
// Generated by Bluespec Compiler, version 2025.07 (build 282e82e9)
//
// On Fri Nov 14 08:21:42 IST 2025
//
//
// Ports:
// Name                         I/O  size props
// RDY_feed_inputs                O     1
// is_idle                        O     1
// RDY_is_idle                    O     1 const
// is_processing                  O     1
// RDY_is_processing              O     1 const
// is_done                        O     1
// RDY_is_done                    O     1 const
// get_current_element            O     6 reg
// RDY_get_current_element        O     1 const
// get_all_spikes                 O   768 reg
// RDY_get_all_spikes             O     1
// get_all_voltages               O 12288 reg
// RDY_get_all_voltages           O     1
// RDY_reset_for_next_token       O     1
// CLK                            I     1 clock
// RST_N                          I     1 reset
// feed_inputs_inputs             I   256
// EN_feed_inputs                 I     1
// EN_reset_for_next_token        I     1
//
// No combinational paths from inputs to outputs
//
//

`ifdef BSV_ASSIGNMENT_DELAY
`else
  `define BSV_ASSIGNMENT_DELAY
`endif

`ifdef BSV_POSITIVE_RESET
  `define BSV_RESET_VALUE 1'b1
  `define BSV_RESET_EDGE posedge
`else
  `define BSV_RESET_VALUE 1'b0
  `define BSV_RESET_EDGE negedge
`endif

module mkLIFLayer(CLK,
		  RST_N,

		  feed_inputs_inputs,
		  EN_feed_inputs,
		  RDY_feed_inputs,

		  is_idle,
		  RDY_is_idle,

		  is_processing,
		  RDY_is_processing,

		  is_done,
		  RDY_is_done,

		  get_current_element,
		  RDY_get_current_element,

		  get_all_spikes,
		  RDY_get_all_spikes,

		  get_all_voltages,
		  RDY_get_all_voltages,

		  EN_reset_for_next_token,
		  RDY_reset_for_next_token);
  input  CLK;
  input  RST_N;

  // action method feed_inputs
  input  [255 : 0] feed_inputs_inputs;
  input  EN_feed_inputs;
  output RDY_feed_inputs;

  // value method is_idle
  output is_idle;
  output RDY_is_idle;

  // value method is_processing
  output is_processing;
  output RDY_is_processing;

  // value method is_done
  output is_done;
  output RDY_is_done;

  // value method get_current_element
  output [5 : 0] get_current_element;
  output RDY_get_current_element;

  // value method get_all_spikes
  output [767 : 0] get_all_spikes;
  output RDY_get_all_spikes;

  // value method get_all_voltages
  output [12287 : 0] get_all_voltages;
  output RDY_get_all_voltages;

  // action method reset_for_next_token
  input  EN_reset_for_next_token;
  output RDY_reset_for_next_token;

  // signals for module outputs
  wire [12287 : 0] get_all_voltages;
  wire [767 : 0] get_all_spikes;
  wire [5 : 0] get_current_element;
  wire RDY_feed_inputs,
       RDY_get_all_spikes,
       RDY_get_all_voltages,
       RDY_get_current_element,
       RDY_is_done,
       RDY_is_idle,
       RDY_is_processing,
       RDY_reset_for_next_token,
       is_done,
       is_idle,
       is_processing;

  // register element_index
  reg [5 : 0] element_index;
  wire [5 : 0] element_index$D_IN;
  wire element_index$EN;

  // register layer_state
  reg [1 : 0] layer_state;
  reg [1 : 0] layer_state$D_IN;
  wire layer_state$EN;

  // ports of submodule neurons_0
  wire [767 : 0] neurons_0$get_voltages;
  wire [47 : 0] neurons_0$get_spikes;
  wire [15 : 0] neurons_0$feed_input_x_t_val;
  wire neurons_0$EN_feed_input,
       neurons_0$EN_reset_for_next_token,
       neurons_0$RDY_feed_input,
       neurons_0$RDY_get_spikes,
       neurons_0$RDY_get_voltages,
       neurons_0$RDY_reset_for_next_token,
       neurons_0$can_accept_input,
       neurons_0$is_done;

  // ports of submodule neurons_1
  wire [767 : 0] neurons_1$get_voltages;
  wire [47 : 0] neurons_1$get_spikes;
  wire [15 : 0] neurons_1$feed_input_x_t_val;
  wire neurons_1$EN_feed_input,
       neurons_1$EN_reset_for_next_token,
       neurons_1$RDY_feed_input,
       neurons_1$RDY_get_spikes,
       neurons_1$RDY_get_voltages,
       neurons_1$RDY_reset_for_next_token,
       neurons_1$can_accept_input,
       neurons_1$is_done;

  // ports of submodule neurons_10
  wire [767 : 0] neurons_10$get_voltages;
  wire [47 : 0] neurons_10$get_spikes;
  wire [15 : 0] neurons_10$feed_input_x_t_val;
  wire neurons_10$EN_feed_input,
       neurons_10$EN_reset_for_next_token,
       neurons_10$RDY_feed_input,
       neurons_10$RDY_get_spikes,
       neurons_10$RDY_get_voltages,
       neurons_10$RDY_reset_for_next_token,
       neurons_10$can_accept_input,
       neurons_10$is_done;

  // ports of submodule neurons_11
  wire [767 : 0] neurons_11$get_voltages;
  wire [47 : 0] neurons_11$get_spikes;
  wire [15 : 0] neurons_11$feed_input_x_t_val;
  wire neurons_11$EN_feed_input,
       neurons_11$EN_reset_for_next_token,
       neurons_11$RDY_feed_input,
       neurons_11$RDY_get_spikes,
       neurons_11$RDY_get_voltages,
       neurons_11$RDY_reset_for_next_token,
       neurons_11$can_accept_input,
       neurons_11$is_done;

  // ports of submodule neurons_12
  wire [767 : 0] neurons_12$get_voltages;
  wire [47 : 0] neurons_12$get_spikes;
  wire [15 : 0] neurons_12$feed_input_x_t_val;
  wire neurons_12$EN_feed_input,
       neurons_12$EN_reset_for_next_token,
       neurons_12$RDY_feed_input,
       neurons_12$RDY_get_spikes,
       neurons_12$RDY_get_voltages,
       neurons_12$RDY_reset_for_next_token,
       neurons_12$can_accept_input,
       neurons_12$is_done;

  // ports of submodule neurons_13
  wire [767 : 0] neurons_13$get_voltages;
  wire [47 : 0] neurons_13$get_spikes;
  wire [15 : 0] neurons_13$feed_input_x_t_val;
  wire neurons_13$EN_feed_input,
       neurons_13$EN_reset_for_next_token,
       neurons_13$RDY_feed_input,
       neurons_13$RDY_get_spikes,
       neurons_13$RDY_get_voltages,
       neurons_13$RDY_reset_for_next_token,
       neurons_13$can_accept_input,
       neurons_13$is_done;

  // ports of submodule neurons_14
  wire [767 : 0] neurons_14$get_voltages;
  wire [47 : 0] neurons_14$get_spikes;
  wire [15 : 0] neurons_14$feed_input_x_t_val;
  wire neurons_14$EN_feed_input,
       neurons_14$EN_reset_for_next_token,
       neurons_14$RDY_feed_input,
       neurons_14$RDY_get_spikes,
       neurons_14$RDY_get_voltages,
       neurons_14$RDY_reset_for_next_token,
       neurons_14$can_accept_input,
       neurons_14$is_done;

  // ports of submodule neurons_15
  wire [767 : 0] neurons_15$get_voltages;
  wire [47 : 0] neurons_15$get_spikes;
  wire [15 : 0] neurons_15$feed_input_x_t_val;
  wire neurons_15$EN_feed_input,
       neurons_15$EN_reset_for_next_token,
       neurons_15$RDY_feed_input,
       neurons_15$RDY_get_spikes,
       neurons_15$RDY_get_voltages,
       neurons_15$RDY_reset_for_next_token,
       neurons_15$can_accept_input,
       neurons_15$is_done;

  // ports of submodule neurons_2
  wire [767 : 0] neurons_2$get_voltages;
  wire [47 : 0] neurons_2$get_spikes;
  wire [15 : 0] neurons_2$feed_input_x_t_val;
  wire neurons_2$EN_feed_input,
       neurons_2$EN_reset_for_next_token,
       neurons_2$RDY_feed_input,
       neurons_2$RDY_get_spikes,
       neurons_2$RDY_get_voltages,
       neurons_2$RDY_reset_for_next_token,
       neurons_2$can_accept_input,
       neurons_2$is_done;

  // ports of submodule neurons_3
  wire [767 : 0] neurons_3$get_voltages;
  wire [47 : 0] neurons_3$get_spikes;
  wire [15 : 0] neurons_3$feed_input_x_t_val;
  wire neurons_3$EN_feed_input,
       neurons_3$EN_reset_for_next_token,
       neurons_3$RDY_feed_input,
       neurons_3$RDY_get_spikes,
       neurons_3$RDY_get_voltages,
       neurons_3$RDY_reset_for_next_token,
       neurons_3$can_accept_input,
       neurons_3$is_done;

  // ports of submodule neurons_4
  wire [767 : 0] neurons_4$get_voltages;
  wire [47 : 0] neurons_4$get_spikes;
  wire [15 : 0] neurons_4$feed_input_x_t_val;
  wire neurons_4$EN_feed_input,
       neurons_4$EN_reset_for_next_token,
       neurons_4$RDY_feed_input,
       neurons_4$RDY_get_spikes,
       neurons_4$RDY_get_voltages,
       neurons_4$RDY_reset_for_next_token,
       neurons_4$can_accept_input,
       neurons_4$is_done;

  // ports of submodule neurons_5
  wire [767 : 0] neurons_5$get_voltages;
  wire [47 : 0] neurons_5$get_spikes;
  wire [15 : 0] neurons_5$feed_input_x_t_val;
  wire neurons_5$EN_feed_input,
       neurons_5$EN_reset_for_next_token,
       neurons_5$RDY_feed_input,
       neurons_5$RDY_get_spikes,
       neurons_5$RDY_get_voltages,
       neurons_5$RDY_reset_for_next_token,
       neurons_5$can_accept_input,
       neurons_5$is_done;

  // ports of submodule neurons_6
  wire [767 : 0] neurons_6$get_voltages;
  wire [47 : 0] neurons_6$get_spikes;
  wire [15 : 0] neurons_6$feed_input_x_t_val;
  wire neurons_6$EN_feed_input,
       neurons_6$EN_reset_for_next_token,
       neurons_6$RDY_feed_input,
       neurons_6$RDY_get_spikes,
       neurons_6$RDY_get_voltages,
       neurons_6$RDY_reset_for_next_token,
       neurons_6$can_accept_input,
       neurons_6$is_done;

  // ports of submodule neurons_7
  wire [767 : 0] neurons_7$get_voltages;
  wire [47 : 0] neurons_7$get_spikes;
  wire [15 : 0] neurons_7$feed_input_x_t_val;
  wire neurons_7$EN_feed_input,
       neurons_7$EN_reset_for_next_token,
       neurons_7$RDY_feed_input,
       neurons_7$RDY_get_spikes,
       neurons_7$RDY_get_voltages,
       neurons_7$RDY_reset_for_next_token,
       neurons_7$can_accept_input,
       neurons_7$is_done;

  // ports of submodule neurons_8
  wire [767 : 0] neurons_8$get_voltages;
  wire [47 : 0] neurons_8$get_spikes;
  wire [15 : 0] neurons_8$feed_input_x_t_val;
  wire neurons_8$EN_feed_input,
       neurons_8$EN_reset_for_next_token,
       neurons_8$RDY_feed_input,
       neurons_8$RDY_get_spikes,
       neurons_8$RDY_get_voltages,
       neurons_8$RDY_reset_for_next_token,
       neurons_8$can_accept_input,
       neurons_8$is_done;

  // ports of submodule neurons_9
  wire [767 : 0] neurons_9$get_voltages;
  wire [47 : 0] neurons_9$get_spikes;
  wire [15 : 0] neurons_9$feed_input_x_t_val;
  wire neurons_9$EN_feed_input,
       neurons_9$EN_reset_for_next_token,
       neurons_9$RDY_feed_input,
       neurons_9$RDY_get_spikes,
       neurons_9$RDY_get_voltages,
       neurons_9$RDY_reset_for_next_token,
       neurons_9$can_accept_input,
       neurons_9$is_done;

  // inputs to muxes for submodule ports
  wire [5 : 0] MUX_element_index$write_1__VAL_1;
  wire [1 : 0] MUX_layer_state$write_1__VAL_1;
  wire MUX_element_index$write_1__SEL_1, MUX_layer_state$write_1__SEL_2;

  // remaining internal signals
  wire neurons_12_can_accept_input__7_AND_neurons_11__ETC___d61,
       neurons_12_is_done_AND_neurons_11_is_done_AND__ETC___d30,
       neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64,
       neurons_15_is_done_AND_neurons_14_is_done_AND__ETC___d33,
       neurons_3_RDY_feed_input__3_AND_neurons_4_RDY__ETC___d117,
       neurons_3_RDY_get_spikes__48_AND_neurons_4_RDY_ETC___d172,
       neurons_3_RDY_get_voltages__02_AND_neurons_4_R_ETC___d226,
       neurons_3_RDY_reset_for_next_token__33_AND_neu_ETC___d257,
       neurons_6_can_accept_input__3_AND_neurons_5_ca_ETC___d55,
       neurons_6_is_done__2_AND_neurons_5_is_done__3__ETC___d24,
       neurons_9_RDY_feed_input__9_AND_neurons_10_RDY_ETC___d111,
       neurons_9_RDY_get_spikes__54_AND_neurons_10_RD_ETC___d166,
       neurons_9_RDY_get_voltages__08_AND_neurons_10__ETC___d220,
       neurons_9_RDY_reset_for_next_token__39_AND_neu_ETC___d251;

  // action method feed_inputs
  assign RDY_feed_inputs =
	     (layer_state == 2'd0 || layer_state == 2'd1) &&
	     neurons_0$RDY_feed_input &&
	     neurons_1$RDY_feed_input &&
	     neurons_2$RDY_feed_input &&
	     neurons_3_RDY_feed_input__3_AND_neurons_4_RDY__ETC___d117 ;

  // value method is_idle
  assign is_idle = layer_state == 2'd0 ;
  assign RDY_is_idle = 1'd1 ;

  // value method is_processing
  assign is_processing = layer_state == 2'd1 || layer_state == 2'd2 ;
  assign RDY_is_processing = 1'd1 ;

  // value method is_done
  assign is_done = layer_state == 2'd3 ;
  assign RDY_is_done = 1'd1 ;

  // value method get_current_element
  assign get_current_element = element_index ;
  assign RDY_get_current_element = 1'd1 ;

  // value method get_all_spikes
  assign get_all_spikes =
	     { neurons_15$get_spikes,
	       neurons_14$get_spikes,
	       neurons_13$get_spikes,
	       neurons_12$get_spikes,
	       neurons_11$get_spikes,
	       neurons_10$get_spikes,
	       neurons_9$get_spikes,
	       neurons_8$get_spikes,
	       neurons_7$get_spikes,
	       neurons_6$get_spikes,
	       neurons_5$get_spikes,
	       neurons_4$get_spikes,
	       neurons_3$get_spikes,
	       neurons_2$get_spikes,
	       neurons_1$get_spikes,
	       neurons_0$get_spikes } ;
  assign RDY_get_all_spikes =
	     layer_state == 2'd3 && neurons_0$RDY_get_spikes &&
	     neurons_1$RDY_get_spikes &&
	     neurons_2$RDY_get_spikes &&
	     neurons_3_RDY_get_spikes__48_AND_neurons_4_RDY_ETC___d172 ;

  // value method get_all_voltages
  assign get_all_voltages =
	     { neurons_15$get_voltages,
	       neurons_14$get_voltages,
	       neurons_13$get_voltages,
	       neurons_12$get_voltages,
	       neurons_11$get_voltages,
	       neurons_10$get_voltages,
	       neurons_9$get_voltages,
	       neurons_8$get_voltages,
	       neurons_7$get_voltages,
	       neurons_6$get_voltages,
	       neurons_5$get_voltages,
	       neurons_4$get_voltages,
	       neurons_3$get_voltages,
	       neurons_2$get_voltages,
	       neurons_1$get_voltages,
	       neurons_0$get_voltages } ;
  assign RDY_get_all_voltages =
	     layer_state == 2'd3 && neurons_0$RDY_get_voltages &&
	     neurons_1$RDY_get_voltages &&
	     neurons_2$RDY_get_voltages &&
	     neurons_3_RDY_get_voltages__02_AND_neurons_4_R_ETC___d226 ;

  // action method reset_for_next_token
  assign RDY_reset_for_next_token =
	     layer_state == 2'd3 && neurons_0$RDY_reset_for_next_token &&
	     neurons_1$RDY_reset_for_next_token &&
	     neurons_2$RDY_reset_for_next_token &&
	     neurons_3_RDY_reset_for_next_token__33_AND_neu_ETC___d257 ;

  // submodule neurons_0
  mkNeuronUnit neurons_0(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_0$feed_input_x_t_val),
			 .EN_feed_input(neurons_0$EN_feed_input),
			 .EN_reset_for_next_token(neurons_0$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_0$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_0$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_0$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_0$get_spikes),
			 .RDY_get_spikes(neurons_0$RDY_get_spikes),
			 .get_voltages(neurons_0$get_voltages),
			 .RDY_get_voltages(neurons_0$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_0$RDY_reset_for_next_token));

  // submodule neurons_1
  mkNeuronUnit neurons_1(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_1$feed_input_x_t_val),
			 .EN_feed_input(neurons_1$EN_feed_input),
			 .EN_reset_for_next_token(neurons_1$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_1$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_1$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_1$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_1$get_spikes),
			 .RDY_get_spikes(neurons_1$RDY_get_spikes),
			 .get_voltages(neurons_1$get_voltages),
			 .RDY_get_voltages(neurons_1$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_1$RDY_reset_for_next_token));

  // submodule neurons_10
  mkNeuronUnit neurons_10(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_10$feed_input_x_t_val),
			  .EN_feed_input(neurons_10$EN_feed_input),
			  .EN_reset_for_next_token(neurons_10$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_10$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_10$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_10$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_10$get_spikes),
			  .RDY_get_spikes(neurons_10$RDY_get_spikes),
			  .get_voltages(neurons_10$get_voltages),
			  .RDY_get_voltages(neurons_10$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_10$RDY_reset_for_next_token));

  // submodule neurons_11
  mkNeuronUnit neurons_11(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_11$feed_input_x_t_val),
			  .EN_feed_input(neurons_11$EN_feed_input),
			  .EN_reset_for_next_token(neurons_11$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_11$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_11$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_11$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_11$get_spikes),
			  .RDY_get_spikes(neurons_11$RDY_get_spikes),
			  .get_voltages(neurons_11$get_voltages),
			  .RDY_get_voltages(neurons_11$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_11$RDY_reset_for_next_token));

  // submodule neurons_12
  mkNeuronUnit neurons_12(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_12$feed_input_x_t_val),
			  .EN_feed_input(neurons_12$EN_feed_input),
			  .EN_reset_for_next_token(neurons_12$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_12$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_12$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_12$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_12$get_spikes),
			  .RDY_get_spikes(neurons_12$RDY_get_spikes),
			  .get_voltages(neurons_12$get_voltages),
			  .RDY_get_voltages(neurons_12$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_12$RDY_reset_for_next_token));

  // submodule neurons_13
  mkNeuronUnit neurons_13(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_13$feed_input_x_t_val),
			  .EN_feed_input(neurons_13$EN_feed_input),
			  .EN_reset_for_next_token(neurons_13$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_13$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_13$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_13$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_13$get_spikes),
			  .RDY_get_spikes(neurons_13$RDY_get_spikes),
			  .get_voltages(neurons_13$get_voltages),
			  .RDY_get_voltages(neurons_13$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_13$RDY_reset_for_next_token));

  // submodule neurons_14
  mkNeuronUnit neurons_14(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_14$feed_input_x_t_val),
			  .EN_feed_input(neurons_14$EN_feed_input),
			  .EN_reset_for_next_token(neurons_14$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_14$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_14$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_14$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_14$get_spikes),
			  .RDY_get_spikes(neurons_14$RDY_get_spikes),
			  .get_voltages(neurons_14$get_voltages),
			  .RDY_get_voltages(neurons_14$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_14$RDY_reset_for_next_token));

  // submodule neurons_15
  mkNeuronUnit neurons_15(.CLK(CLK),
			  .RST_N(RST_N),
			  .feed_input_x_t_val(neurons_15$feed_input_x_t_val),
			  .EN_feed_input(neurons_15$EN_feed_input),
			  .EN_reset_for_next_token(neurons_15$EN_reset_for_next_token),
			  .RDY_feed_input(neurons_15$RDY_feed_input),
			  .is_busy(),
			  .RDY_is_busy(),
			  .is_done(neurons_15$is_done),
			  .RDY_is_done(),
			  .get_current_index(),
			  .RDY_get_current_index(),
			  .can_accept_input(neurons_15$can_accept_input),
			  .RDY_can_accept_input(),
			  .get_spikes(neurons_15$get_spikes),
			  .RDY_get_spikes(neurons_15$RDY_get_spikes),
			  .get_voltages(neurons_15$get_voltages),
			  .RDY_get_voltages(neurons_15$RDY_get_voltages),
			  .RDY_reset_for_next_token(neurons_15$RDY_reset_for_next_token));

  // submodule neurons_2
  mkNeuronUnit neurons_2(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_2$feed_input_x_t_val),
			 .EN_feed_input(neurons_2$EN_feed_input),
			 .EN_reset_for_next_token(neurons_2$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_2$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_2$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_2$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_2$get_spikes),
			 .RDY_get_spikes(neurons_2$RDY_get_spikes),
			 .get_voltages(neurons_2$get_voltages),
			 .RDY_get_voltages(neurons_2$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_2$RDY_reset_for_next_token));

  // submodule neurons_3
  mkNeuronUnit neurons_3(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_3$feed_input_x_t_val),
			 .EN_feed_input(neurons_3$EN_feed_input),
			 .EN_reset_for_next_token(neurons_3$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_3$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_3$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_3$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_3$get_spikes),
			 .RDY_get_spikes(neurons_3$RDY_get_spikes),
			 .get_voltages(neurons_3$get_voltages),
			 .RDY_get_voltages(neurons_3$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_3$RDY_reset_for_next_token));

  // submodule neurons_4
  mkNeuronUnit neurons_4(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_4$feed_input_x_t_val),
			 .EN_feed_input(neurons_4$EN_feed_input),
			 .EN_reset_for_next_token(neurons_4$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_4$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_4$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_4$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_4$get_spikes),
			 .RDY_get_spikes(neurons_4$RDY_get_spikes),
			 .get_voltages(neurons_4$get_voltages),
			 .RDY_get_voltages(neurons_4$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_4$RDY_reset_for_next_token));

  // submodule neurons_5
  mkNeuronUnit neurons_5(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_5$feed_input_x_t_val),
			 .EN_feed_input(neurons_5$EN_feed_input),
			 .EN_reset_for_next_token(neurons_5$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_5$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_5$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_5$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_5$get_spikes),
			 .RDY_get_spikes(neurons_5$RDY_get_spikes),
			 .get_voltages(neurons_5$get_voltages),
			 .RDY_get_voltages(neurons_5$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_5$RDY_reset_for_next_token));

  // submodule neurons_6
  mkNeuronUnit neurons_6(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_6$feed_input_x_t_val),
			 .EN_feed_input(neurons_6$EN_feed_input),
			 .EN_reset_for_next_token(neurons_6$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_6$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_6$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_6$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_6$get_spikes),
			 .RDY_get_spikes(neurons_6$RDY_get_spikes),
			 .get_voltages(neurons_6$get_voltages),
			 .RDY_get_voltages(neurons_6$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_6$RDY_reset_for_next_token));

  // submodule neurons_7
  mkNeuronUnit neurons_7(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_7$feed_input_x_t_val),
			 .EN_feed_input(neurons_7$EN_feed_input),
			 .EN_reset_for_next_token(neurons_7$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_7$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_7$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_7$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_7$get_spikes),
			 .RDY_get_spikes(neurons_7$RDY_get_spikes),
			 .get_voltages(neurons_7$get_voltages),
			 .RDY_get_voltages(neurons_7$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_7$RDY_reset_for_next_token));

  // submodule neurons_8
  mkNeuronUnit neurons_8(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_8$feed_input_x_t_val),
			 .EN_feed_input(neurons_8$EN_feed_input),
			 .EN_reset_for_next_token(neurons_8$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_8$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_8$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_8$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_8$get_spikes),
			 .RDY_get_spikes(neurons_8$RDY_get_spikes),
			 .get_voltages(neurons_8$get_voltages),
			 .RDY_get_voltages(neurons_8$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_8$RDY_reset_for_next_token));

  // submodule neurons_9
  mkNeuronUnit neurons_9(.CLK(CLK),
			 .RST_N(RST_N),
			 .feed_input_x_t_val(neurons_9$feed_input_x_t_val),
			 .EN_feed_input(neurons_9$EN_feed_input),
			 .EN_reset_for_next_token(neurons_9$EN_reset_for_next_token),
			 .RDY_feed_input(neurons_9$RDY_feed_input),
			 .is_busy(),
			 .RDY_is_busy(),
			 .is_done(neurons_9$is_done),
			 .RDY_is_done(),
			 .get_current_index(),
			 .RDY_get_current_index(),
			 .can_accept_input(neurons_9$can_accept_input),
			 .RDY_can_accept_input(),
			 .get_spikes(neurons_9$get_spikes),
			 .RDY_get_spikes(neurons_9$RDY_get_spikes),
			 .get_voltages(neurons_9$get_voltages),
			 .RDY_get_voltages(neurons_9$RDY_get_voltages),
			 .RDY_reset_for_next_token(neurons_9$RDY_reset_for_next_token));

  // inputs to muxes for submodule ports
  assign MUX_element_index$write_1__SEL_1 =
	     EN_feed_inputs &&
	     neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64 ;
  assign MUX_layer_state$write_1__SEL_2 =
	     layer_state == 2'd2 &&
	     neurons_15_is_done_AND_neurons_14_is_done_AND__ETC___d33 ;
  assign MUX_element_index$write_1__VAL_1 =
	     (element_index == 6'd47) ? 6'd0 : element_index + 6'd1 ;
  assign MUX_layer_state$write_1__VAL_1 =
	     (element_index == 6'd47) ? 2'd2 : 2'd1 ;

  // register element_index
  assign element_index$D_IN =
	     MUX_element_index$write_1__SEL_1 ?
	       MUX_element_index$write_1__VAL_1 :
	       6'd0 ;
  assign element_index$EN =
	     EN_feed_inputs &&
	     neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64 ||
	     EN_reset_for_next_token ;

  // register layer_state
  always@(MUX_element_index$write_1__SEL_1 or
	  MUX_layer_state$write_1__VAL_1 or
	  MUX_layer_state$write_1__SEL_2 or EN_reset_for_next_token)
  begin
    case (1'b1) // synopsys parallel_case
      MUX_element_index$write_1__SEL_1:
	  layer_state$D_IN = MUX_layer_state$write_1__VAL_1;
      MUX_layer_state$write_1__SEL_2: layer_state$D_IN = 2'd3;
      EN_reset_for_next_token: layer_state$D_IN = 2'd0;
      default: layer_state$D_IN = 2'b10 /* unspecified value */ ;
    endcase
  end
  assign layer_state$EN =
	     EN_feed_inputs &&
	     neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64 ||
	     layer_state == 2'd2 &&
	     neurons_15_is_done_AND_neurons_14_is_done_AND__ETC___d33 ||
	     EN_reset_for_next_token ;

  // submodule neurons_0
  assign neurons_0$feed_input_x_t_val = feed_inputs_inputs[15:0] ;
  assign neurons_0$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_0$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_1
  assign neurons_1$feed_input_x_t_val = feed_inputs_inputs[31:16] ;
  assign neurons_1$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_1$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_10
  assign neurons_10$feed_input_x_t_val = feed_inputs_inputs[175:160] ;
  assign neurons_10$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_10$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_11
  assign neurons_11$feed_input_x_t_val = feed_inputs_inputs[191:176] ;
  assign neurons_11$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_11$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_12
  assign neurons_12$feed_input_x_t_val = feed_inputs_inputs[207:192] ;
  assign neurons_12$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_12$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_13
  assign neurons_13$feed_input_x_t_val = feed_inputs_inputs[223:208] ;
  assign neurons_13$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_13$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_14
  assign neurons_14$feed_input_x_t_val = feed_inputs_inputs[239:224] ;
  assign neurons_14$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_14$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_15
  assign neurons_15$feed_input_x_t_val = feed_inputs_inputs[255:240] ;
  assign neurons_15$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_15$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_2
  assign neurons_2$feed_input_x_t_val = feed_inputs_inputs[47:32] ;
  assign neurons_2$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_2$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_3
  assign neurons_3$feed_input_x_t_val = feed_inputs_inputs[63:48] ;
  assign neurons_3$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_3$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_4
  assign neurons_4$feed_input_x_t_val = feed_inputs_inputs[79:64] ;
  assign neurons_4$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_4$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_5
  assign neurons_5$feed_input_x_t_val = feed_inputs_inputs[95:80] ;
  assign neurons_5$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_5$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_6
  assign neurons_6$feed_input_x_t_val = feed_inputs_inputs[111:96] ;
  assign neurons_6$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_6$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_7
  assign neurons_7$feed_input_x_t_val = feed_inputs_inputs[127:112] ;
  assign neurons_7$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_7$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_8
  assign neurons_8$feed_input_x_t_val = feed_inputs_inputs[143:128] ;
  assign neurons_8$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_8$EN_reset_for_next_token = EN_reset_for_next_token ;

  // submodule neurons_9
  assign neurons_9$feed_input_x_t_val = feed_inputs_inputs[159:144] ;
  assign neurons_9$EN_feed_input = MUX_element_index$write_1__SEL_1 ;
  assign neurons_9$EN_reset_for_next_token = EN_reset_for_next_token ;

  // remaining internal signals
  assign neurons_12_can_accept_input__7_AND_neurons_11__ETC___d61 =
	     neurons_12$can_accept_input && neurons_11$can_accept_input &&
	     neurons_10$can_accept_input &&
	     neurons_9$can_accept_input &&
	     neurons_8$can_accept_input &&
	     neurons_7$can_accept_input &&
	     neurons_6_can_accept_input__3_AND_neurons_5_ca_ETC___d55 ;
  assign neurons_12_is_done_AND_neurons_11_is_done_AND__ETC___d30 =
	     neurons_12$is_done && neurons_11$is_done && neurons_10$is_done &&
	     neurons_9$is_done &&
	     neurons_8$is_done &&
	     neurons_7$is_done &&
	     neurons_6_is_done__2_AND_neurons_5_is_done__3__ETC___d24 ;
  assign neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64 =
	     neurons_15$can_accept_input && neurons_14$can_accept_input &&
	     neurons_13$can_accept_input &&
	     neurons_12_can_accept_input__7_AND_neurons_11__ETC___d61 ;
  assign neurons_15_is_done_AND_neurons_14_is_done_AND__ETC___d33 =
	     neurons_15$is_done && neurons_14$is_done && neurons_13$is_done &&
	     neurons_12_is_done_AND_neurons_11_is_done_AND__ETC___d30 ;
  assign neurons_3_RDY_feed_input__3_AND_neurons_4_RDY__ETC___d117 =
	     neurons_3$RDY_feed_input && neurons_4$RDY_feed_input &&
	     neurons_5$RDY_feed_input &&
	     neurons_6$RDY_feed_input &&
	     neurons_7$RDY_feed_input &&
	     neurons_8$RDY_feed_input &&
	     neurons_9_RDY_feed_input__9_AND_neurons_10_RDY_ETC___d111 ;
  assign neurons_3_RDY_get_spikes__48_AND_neurons_4_RDY_ETC___d172 =
	     neurons_3$RDY_get_spikes && neurons_4$RDY_get_spikes &&
	     neurons_5$RDY_get_spikes &&
	     neurons_6$RDY_get_spikes &&
	     neurons_7$RDY_get_spikes &&
	     neurons_8$RDY_get_spikes &&
	     neurons_9_RDY_get_spikes__54_AND_neurons_10_RD_ETC___d166 ;
  assign neurons_3_RDY_get_voltages__02_AND_neurons_4_R_ETC___d226 =
	     neurons_3$RDY_get_voltages && neurons_4$RDY_get_voltages &&
	     neurons_5$RDY_get_voltages &&
	     neurons_6$RDY_get_voltages &&
	     neurons_7$RDY_get_voltages &&
	     neurons_8$RDY_get_voltages &&
	     neurons_9_RDY_get_voltages__08_AND_neurons_10__ETC___d220 ;
  assign neurons_3_RDY_reset_for_next_token__33_AND_neu_ETC___d257 =
	     neurons_3$RDY_reset_for_next_token &&
	     neurons_4$RDY_reset_for_next_token &&
	     neurons_5$RDY_reset_for_next_token &&
	     neurons_6$RDY_reset_for_next_token &&
	     neurons_7$RDY_reset_for_next_token &&
	     neurons_8$RDY_reset_for_next_token &&
	     neurons_9_RDY_reset_for_next_token__39_AND_neu_ETC___d251 ;
  assign neurons_6_can_accept_input__3_AND_neurons_5_ca_ETC___d55 =
	     neurons_6$can_accept_input && neurons_5$can_accept_input &&
	     neurons_4$can_accept_input &&
	     neurons_3$can_accept_input &&
	     neurons_2$can_accept_input &&
	     neurons_1$can_accept_input &&
	     neurons_0$can_accept_input ;
  assign neurons_6_is_done__2_AND_neurons_5_is_done__3__ETC___d24 =
	     neurons_6$is_done && neurons_5$is_done && neurons_4$is_done &&
	     neurons_3$is_done &&
	     neurons_2$is_done &&
	     neurons_1$is_done &&
	     neurons_0$is_done ;
  assign neurons_9_RDY_feed_input__9_AND_neurons_10_RDY_ETC___d111 =
	     neurons_9$RDY_feed_input && neurons_10$RDY_feed_input &&
	     neurons_11$RDY_feed_input &&
	     neurons_12$RDY_feed_input &&
	     neurons_13$RDY_feed_input &&
	     neurons_14$RDY_feed_input &&
	     neurons_15$RDY_feed_input ;
  assign neurons_9_RDY_get_spikes__54_AND_neurons_10_RD_ETC___d166 =
	     neurons_9$RDY_get_spikes && neurons_10$RDY_get_spikes &&
	     neurons_11$RDY_get_spikes &&
	     neurons_12$RDY_get_spikes &&
	     neurons_13$RDY_get_spikes &&
	     neurons_14$RDY_get_spikes &&
	     neurons_15$RDY_get_spikes ;
  assign neurons_9_RDY_get_voltages__08_AND_neurons_10__ETC___d220 =
	     neurons_9$RDY_get_voltages && neurons_10$RDY_get_voltages &&
	     neurons_11$RDY_get_voltages &&
	     neurons_12$RDY_get_voltages &&
	     neurons_13$RDY_get_voltages &&
	     neurons_14$RDY_get_voltages &&
	     neurons_15$RDY_get_voltages ;
  assign neurons_9_RDY_reset_for_next_token__39_AND_neu_ETC___d251 =
	     neurons_9$RDY_reset_for_next_token &&
	     neurons_10$RDY_reset_for_next_token &&
	     neurons_11$RDY_reset_for_next_token &&
	     neurons_12$RDY_reset_for_next_token &&
	     neurons_13$RDY_reset_for_next_token &&
	     neurons_14$RDY_reset_for_next_token &&
	     neurons_15$RDY_reset_for_next_token ;

  // handling of inlined registers

  always@(posedge CLK)
  begin
    if (RST_N == `BSV_RESET_VALUE)
      begin
        element_index <= `BSV_ASSIGNMENT_DELAY 6'd0;
	layer_state <= `BSV_ASSIGNMENT_DELAY 2'd0;
      end
    else
      begin
        if (element_index$EN)
	  element_index <= `BSV_ASSIGNMENT_DELAY element_index$D_IN;
	if (layer_state$EN)
	  layer_state <= `BSV_ASSIGNMENT_DELAY layer_state$D_IN;
      end
  end

  // synopsys translate_off
  `ifdef BSV_NO_INITIAL_BLOCKS
  `else // not BSV_NO_INITIAL_BLOCKS
  initial
  begin
    element_index = 6'h2A;
    layer_state = 2'h2;
  end
  `endif // BSV_NO_INITIAL_BLOCKS
  // synopsys translate_on

  // handling of system tasks

  // synopsys translate_off
  always@(negedge CLK)
  begin
    #0;
    if (RST_N != `BSV_RESET_VALUE)
      if (EN_feed_inputs &&
	  neurons_15_can_accept_input__4_AND_neurons_14__ETC___d64 &&
	  element_index == 6'd47)
	$display("[LIFLayer] All 48 elements fed, waiting for neurons to finish");
    if (RST_N != `BSV_RESET_VALUE)
      if (EN_reset_for_next_token)
	$display("[LIFLayer] Layer reset for next token - all v_t and refr preserved");
    if (RST_N != `BSV_RESET_VALUE)
      if (layer_state == 2'd2 &&
	  neurons_15_is_done_AND_neurons_14_is_done_AND__ETC___d33)
	$display("[LIFLayer] All 16 neurons completed 48 elements - LAYER DONE");
  end
  // synopsys translate_on
endmodule  // mkLIFLayer

